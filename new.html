<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Happy Birthday ❤</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Quicksand:wght@300;400;600&display=swap" rel="stylesheet">

<style>
  :root{
    --bg:#0b0f14;
    --card:#0f1720;
    --muted:#9aa7b2;
    --accent1:#ff6bcb;
    --accent2:#7b61ff;
    --glass: rgba(255,255,255,0.04);
    --glass-2: rgba(255,255,255,0.02);
    --radius:16px;
  }
  *{box-sizing:border-box; -webkit-font-smoothing:antialiased}
  html,body{height:100%}
  body{
    margin:0;
    font-family:"Quicksand",system-ui,Segoe UI,Roboto,Helvetica,Arial;
    background: radial-gradient(1200px 600px at 10% 10%, rgba(123,97,255,0.06), transparent),
                radial-gradient(900px 400px at 90% 90%, rgba(255,107,203,0.04), transparent),
                var(--bg);
    color:#e6f0f6;
    overflow-x:hidden;
    padding:24px;
  }

  /* Intro overlay with rockets (canvas) */
  #introOverlay{
    position:fixed;
    inset:0;
    z-index:9999;
    display:flex;
    align-items:center;
    justify-content:center;
    background:linear-gradient(180deg, rgba(11,15,20,0.9), rgba(11,15,20,0.95));
    transition:opacity .8s ease, visibility .8s;
  }
  #introOverlay.hidden{opacity:0; visibility:hidden; pointer-events:none;}

  canvas#rocketsCanvas{
    position:absolute;
    inset:0;
    display:block;
  }

  /* Main layout */
  .container{
    max-width:1200px;
    margin:0 auto;
    position:relative;
    z-index:10;
  }

  header{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:16px;
    margin-bottom:18px;
  }

  .title{
    font-family:"Great Vibes", cursive;
    font-size:100px;
    font-weight:700;
    color:linear-gradient(90deg,var(--accent1),var(--accent2));
    letter-spacing:1px;
    text-shadow: 0 6px 18px rgba(123,97,255,0.08), 0 2px 8px rgba(0,0,0,0.6);
  }
  /* small top flourish */
  .title span.heart{margin-left:8px;color:var(--accent1); display:inline-block; transform:translateY(2px)}

  /* grid for top sections (letter & cake) */
  .topGrid{
    display:grid;
    grid-template-columns: 1fr 380px;
    gap:20px;
    align-items:start;
    margin-bottom:20px;
  }

  /* Card style */
  .card{
    background: linear-gradient(180deg,var(--card), rgba(255,255,255,0.01));
    border-radius:var(--radius);
    padding:18px;
    box-shadow: 0 6px 20px rgba(2,6,12,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
    border:1px solid rgba(255,255,255,0.02);
  }

  /* Letter box */
  .letterBox{
    display:flex;
    flex-direction:column;
    gap:12px;
    min-height:180px;
  }
  .letterTitle{font-weight:600; color:var(--accent2); font-size:16px}
  .letterText{color:var(--muted); line-height:1.45; font-size:15px}
  .btn{
    background:linear-gradient(90deg,var(--accent1),var(--accent2));
    border:none;
    padding:10px 14px;
    border-radius:12px;
    color:white;
    font-weight:700;
    cursor:pointer;
    box-shadow: 0 8px 20px rgba(123,97,255,0.14);
    transition:transform .15s ease, opacity .15s;
  }
  .btn:active{transform:translateY(2px)}

 /* Cake card */
    .cake-card{
      background:var(--card); border-radius:14px; padding:14px; display:flex; flex-direction:column; align-items:center; gap:10px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.6);
    }
    .cake-card small{ color:var(--muted); font-size:13px; }

  /* frosting & sprinkles */
  .sprinkles{
    position:absolute;
    top:8px; left:16px; right:16px; height:20px;
    display:flex; gap:6px; justify-content:center; align-items:center;
    z-index:5;
  }
  .sprinkles span{width:6px;height:12px;border-radius:3px; display:inline-block; opacity:.9}
  /* candle */
  .candle{
    position:absolute;
    top:-18px;
    width:12px;
    height:28px;
    border-radius:6px;
    left:50%;
    transform:translateX(-50%);
    background: linear-gradient(180deg,#ffffff,#ffe9a6);
    display:flex;
    align-items:flex-start;
    justify-content:center;
    z-index:6;
    box-shadow:0 6px 18px rgba(0,0,0,0.25);
  }
  .flame{
    margin-top:2px;
    width:10px; height:12px;
    background: radial-gradient(circle at 40% 30%, #fff59d 0%, #ffb74d 30%, rgba(255,87,34,0.85) 70%);
    border-radius:50% 50% 50% 50%;
    filter:drop-shadow(0 4px 8px rgba(255,140,100,0.12));
    animation:flame 900ms infinite;
  }
  @keyframes flame{
    0%{transform:translateY(0) scaleY(1)}
    50%{transform:translateY(-3px) scaleY(0.98)}
    100%{transform:translateY(0) scaleY(1)}
  }

  /* Wishes big box */
  .wishes{
    margin:18px 0;
    padding:22px;
    border-radius:14px;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    font-size:18px;
    line-height:1.6;
    color:#f2f8fb;
    box-shadow: 0 8px 30px rgba(6,12,20,0.6);
  }

  /* Photos row */
  .mediaRow{
    display:grid;
    grid-template-columns: repeat(5, 1fr);
    gap:14px;
    margin-bottom:18px;
  }

  .photoCard, .videoCard{
    background:var(--glass);
    border-radius:12px;
    overflow:hidden;
    min-height:140px;
    display:flex;
    align-items:center;
    justify-content:center;
    position:relative;
    border:1px solid rgba(255,255,255,0.03);
  }
  .photoCard img{width:100%; height:100%; object-fit:cover; display:block}
  .placeholder{
    color:var(--muted); font-size:14px; padding:16px; text-align:center;
  }

  /* Videos row */
  .videosRow{
    display:grid;
    grid-template-columns: repeat(3, 1fr);
    gap:14px;
    margin-bottom:18px;
  }
  .videoControls{
    position:absolute; bottom:10px; left:10px; right:10px; display:flex; gap:8px; justify-content:flex-end;
  }
  .iconBtn{
    background: rgba(255,255,255,0.06);
    border-radius:10px; padding:8px 10px; border:none; color:white; cursor:pointer; font-weight:700;
  }

  /* last gift box */
  .giftBox{
    padding:18px;
    border-radius:12px;
    background: linear-gradient(90deg, rgba(255,107,203,0.06), rgba(123,97,255,0.04));
    color:#f3f6fb;
    text-align:center;
    font-size:15px;
  }

  /* small utilities */
  .muted{color:var(--muted)}
  .center{display:flex; align-items:center; justify-content:center}

  /* Letter modal */
  .modal{
    position:fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:9998;
    background:linear-gradient(180deg, rgba(3,6,10,0.6), rgba(3,6,10,0.78));
    visibility:hidden; opacity:0; transition:opacity .25s, visibility .25s;
  }
  .modal.show{visibility:visible; opacity:1}
  .modalCard{
    width:clamp(320px, 80vw, 680px);
    padding:24px;
    border-radius:14px;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    box-shadow: 0 12px 40px rgba(2,6,12,0.7);
    color:#eaf6ff;
  }
  .closeX{position:absolute; right:18px; top:18px; background:transparent; border:none; color:var(--muted); font-size:18px; cursor:pointer}

  /* responsive */
  @media (max-width:980px){
    .topGrid{ grid-template-columns: 1fr; }
    .cakeArea{ width:100%; height:260px }
    .mediaRow{ grid-template-columns: repeat(2, 1fr); }
    .videosRow{ grid-template-columns: repeat(1, 1fr); }
    .title{font-size:40px}
  }
  @media (max-width:520px){
    .title{font-size:34px}
    .mediaRow{ grid-template-columns: repeat(1, 1fr); }
  }

      /* subtle hover pop */
    .card-hover:hover{ transform: translateY(-6px); transition: transform 220ms var(--soft); }
</style>
</head>
<body>

<!-- Intro overlay with rockets canvas -->
<div id="introOverlay" aria-hidden="false">
  <canvas id="rocketsCanvas"></canvas>
  <div style="z-index:20; text-align:center;">
    <h1 style="font-family:'Great Vibes',cursive; font-size:100px; color:white; margin:0 0 8px 0">Happy Birthday ❤</h1>
    <p style="color:rgba(255,255,255,0.85); margin:0; font-weight:600">Make a wish... the page will open soon ✨</p>
  </div>
</div>

<!-- Letter modal (hidden) -->
<div id="letterModal" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
  <div class="modalCard card" role="document">
    <button class="closeX" onclick="closeLetter()">✕</button>
    <h2 style="font-family:'Great Vibes',cursive; font-size:28px; margin:4px 0 6px 0">For you ❤️</h2>
    <p id="letterContent" style="color:var(--muted); font-size:15px; line-height:1.6; min-height:120px"></p>
    <div style="text-align:right; margin-top:12px;">
      <button class="btn" onclick="closeLetter()">Close</button>
    </div>
  </div>
</div>

<!-- Main page -->
<div class="container" id="mainContent" style="opacity:0; transform:translateY(6px); transition:opacity .8s ease, transform .8s ease;">
  <header>
    <div>
      <div class="title">Happy Birthday <span class="heart">❤</span></div>
      <div class="muted" style="font-size:13px; margin-top:2px">Wishing you a day filled with love & sweets ✨</div>
    </div>
    <div style="display:flex; gap:10px; align-items:center;">
      <div style="background:var(--glass); padding:8px 12px; border-radius:12px; font-weight:700">Sent with ❤</div>
    </div>
  </header>

  <section class="topGrid">
    <!-- Left: Letter -->
    <div class="card letterBox">
      <div>
        <div class="letterTitle">There's a letter waiting for you...</div>
        <div class="letterText">A little note filled with memories, jokes, and all the silly things I love about you. Click the button to read it.</div>
      </div>
      <div style="margin-top:auto; display:flex; gap:10px;">
        <button class="btn" onclick="openLetter()">Show Letter</button>
        <button class="btn" style="background:transparent; border:1px solid rgba(255,255,255,0.04); color:var(--muted)" onclick="downloadLetter()">Save</button>
      </div>
    </div>

     <!-- Right column -->
      <aside>
        <div class="cake-card card-hover center">
          <small>Tap the cake to take a bite 🍴</small>
          <canvas id="cakeCanvas" width="360" height="300" style="touch-action:manipulation;"></canvas>
          <div style="display:flex; gap:8px; margin-top:6px;">
            <div style="font-size:13px; color:var(--muted)">Bites left: <span id="bitesLeft">10</span></div>
            <button class="btn" id="resetCake" style="padding:8px 12px; font-size:13px;">New Cake</button>
          </div>
        </div>
      </aside>
    </main>
  </div>

  <!-- Wishes -->
  <section class="wishes card">
    <strong style="font-size:20px; display:block; margin-bottom:8px">My wish for you today:</strong>
    <div id="wishText" style="font-size:16px; color:#e9f8ff; line-height:1.6">
      <!-- Replace this text with your full birthday wish -->
      Hey Jivika — I wish you endless smiles, tiny adventures, and all the warm hugs your heart can hold. You're amazing. Happy birthday. 🎂✨
    </div>
  </section>

  <!-- Photos -->
  <section>
    <h3 style="margin:8px 0 12px 0; color:var(--muted)">Mine Girl</h3>
    <div class="mediaRow">
      <!-- Replace src="PLACEHOLDER" with your real image URLs -->
      <div class="photoCard"><img src="file:///C:/Users/shree/Documents/YT/J/2.jpg" alt="photo1"></div>
      <div class="photoCard"><img src="file:///C:/Users/shree/Documents/YT/J/3.jpg" alt="photo2"></div>
      <div class="photoCard"><img src="file:///C:/Users/shree/Documents/YT/J/4.jpg" alt="photo3"></div>
      <div class="photoCard"><img src="file:///C:/Users/shree/Documents/YT/J/5.jpg" alt="photo4"></div>
      <div class="photoCard"><img src="file:///C:/Users/shree/Documents/YT/J/1.jpg" alt="photo5"></div>
    </div>
  </section>

  <!-- Videos -->
  <section>
    <h3 style="margin:8px 0 12px 0; color:var(--muted)">Little videos</h3>
    <div class="videosRow">
      <!-- Replace src with your video URLs; set crossorigin if needed -->
      <div class="videoCard card">
        <video class="vplayer" width="100%" style="max-height:220px" preload="metadata">
          <source src="file:///C:/Users/shree/Documents/YT/J/J1.mp4" type="video/mp4">
          <!-- Put MP4 link or let browser show fallback -->
          Your browser doesn't support embedded videos.
        </video>
        <div class="videoControls">
          <button class="iconBtn" data-action="play">Play</button>
          <button class="iconBtn" data-action="pause">Pause</button>
          <button class="iconBtn" data-action="download">Download</button>
        </div>
      </div>

      <div class="videoCard card">
        <video class="vplayer" width="100%" style="max-height:220px" preload="metadata">
          <source src="file:///C:/Users/shree/Documents/YT/J/J2.mp4" type="video/mp4">
          Your browser doesn't support embedded videos.
        </video>
        <div class="videoControls">
          <button class="iconBtn" data-action="play">Play</button>
          <button class="iconBtn" data-action="pause">Pause</button>
          <button class="iconBtn" data-action="download">Download</button>
        </div>
      </div>

           <div class="videoCard card">
        <video class="vplayer" width="100%" style="max-height:220px" preload="metadata">
          <source src="file:///C:/Users/shree/Documents/YT/J/J11.mp4" type="video/mp4">
          Your browser doesn't support embedded videos.
        </video>
        <div class="videoControls">
          <button class="iconBtn" data-action="play">Play</button>
          <button class="iconBtn" data-action="pause">Pause</button>
          <button class="iconBtn" data-action="download">Download</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Videos -->
  <section>
    <div class="videosRow">
      <!-- Replace src with your video URLs; set crossorigin if needed -->
      <div class="videoCard card">
        <video class="vplayer" width="100%" style="max-height:220px" preload="metadata">
          <source src="file:///C:/Users/shree/Documents/YT/J/J7.mp4" type="video/mp4">
          <!-- Put MP4 link or let browser show fallback -->
          Your browser doesn't support embedded videos.
        </video>
        <div class="videoControls">
          <button class="iconBtn" data-action="play">Play</button>
          <button class="iconBtn" data-action="pause">Pause</button>
          <button class="iconBtn" data-action="download">Download</button>
        </div>
      </div>

      <div class="videoCard card">
        <video class="vplayer" width="100%" style="max-height:220px" preload="metadata">
          <source src="file:///C:/Users/shree/Documents/YT/J/J10.mp4" type="video/mp4">
          Your browser doesn't support embedded videos.
        </video>
        <div class="videoControls">
          <button class="iconBtn" data-action="play">Play</button>
          <button class="iconBtn" data-action="pause">Pause</button>
          <button class="iconBtn" data-action="download">Download</button>
        </div>
      </div>

           <div class="videoCard card">
        <video class="vplayer" width="100%" style="max-height:220px" preload="metadata">
          <source src="file:///C:/Users/shree/Documents/YT/J/J9.mp4" type="video/mp4">
          Your browser doesn't support embedded videos.
        </video>
        <div class="videoControls">
          <button class="iconBtn" data-action="play">Play</button>
          <button class="iconBtn" data-action="pause">Pause</button>
          <button class="iconBtn" data-action="download">Download</button>
        </div>
      </div>
    </div>
  </section>

    <!-- Videos -->
  <section>
    <div class="videosRow">
      <!-- Replace src with your video URLs; set crossorigin if needed -->
      <div class="videoCard card">
        <video class="vplayer" width="100%" style="max-height:220px" preload="metadata">
          <source src="file:///C:/Users/shree/Documents/YT/J/J3.mp4" type="video/mp4">
          <!-- Put MP4 link or let browser show fallback -->
          Your browser doesn't support embedded videos.
        </video>
        <div class="videoControls">
          <button class="iconBtn" data-action="play">Play</button>
          <button class="iconBtn" data-action="pause">Pause</button>
          <button class="iconBtn" data-action="download">Download</button>
        </div>
      </div>

      <div class="videoCard card">
        <video class="vplayer" width="100%" style="max-height:220px" preload="metadata">
          <source src="file:///C:/Users/shree/Documents/YT/J/J12.mp4" type="video/mp4">
          Your browser doesn't support embedded videos.
        </video>
        <div class="videoControls">
          <button class="iconBtn" data-action="play">Play</button>
          <button class="iconBtn" data-action="pause">Pause</button>
          <button class="iconBtn" data-action="download">Download</button>
        </div>
      </div>

           <div class="videoCard card">
        <video class="vplayer" width="100%" style="max-height:220px" preload="metadata">
          <source src="file:///C:/Users/shree/Documents/YT/J/J13.mp4" type="video/mp4">
          Your browser doesn't support embedded videos.
        </video>
        <div class="videoControls">
          <button class="iconBtn" data-action="play">Play</button>
          <button class="iconBtn" data-action="pause">Pause</button>
          <button class="iconBtn" data-action="download">Download</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Gift message -->
  <section style="margin-top:10px" class="card giftBox">
    Hmm.. It seems that I can't give you an offline gift, but I can give any online gift you want — like a subscription, movie, or anything else. Message me on Instagram and I'll send it. 💌
  </section>

  <div style="height:36px"></div>
</div>

<script>
/* ===============================
   Intro rockets/fireworks (canvas)
   Fires for ~5 seconds then fades to reveal page
   =============================== */
(function(){
  const overlay = document.getElementById('introOverlay');
  const canvas = document.getElementById('rocketsCanvas');
  const ctx = canvas.getContext('2d');
  let w,h;
  function resize(){ w = canvas.width = innerWidth; h = canvas.height = innerHeight; }
  resize(); addEventListener('resize', resize);

  // particles for explosion
  function rand(min,max){ return Math.random()*(max-min)+min; }
  class Rocket {
    constructor(){
      this.x = rand(50,w-50);
      this.y = h + 20;
      this.vy = -rand(6,10);
      this.vx = rand(-1,1);
      this.color = `hsl(${Math.floor(rand(0,360))},80%,60%)`;
      this.exploded=false;
      this.trail=[];
    }
    update(){
      if(!this.exploded){
        this.trail.push({x:this.x,y:this.y});
        if(this.trail.length>12) this.trail.shift();
        this.x += this.vx; this.y += this.vy;
        this.vy += 0.12; // gravity
        if(this.vy>=-1.5 || Math.random()<0.02 || this.y < h*0.5) this.explode();
      } else {
        this.particles.forEach(p=>p.update());
        this.particles = this.particles.filter(p=>!p.dead);
      }
    }
    draw(){
      if(!this.exploded){
        ctx.beginPath();
        ctx.moveTo(this.x,this.y);
        for(let i=this.trail.length-1;i>=0;i--){
          const t = this.trail[i];
          ctx.lineTo(t.x,t.y);
        }
        ctx.strokeStyle=this.color;
        ctx.lineWidth=2.2; ctx.stroke();
      } else {
        this.particles.forEach(p=>p.draw());
      }
    }
    explode(){
      this.exploded=true;
      this.particles = [];
      const count = Math.floor(rand(18,34));
      for(let i=0;i<count;i++) this.particles.push(new Particle(this.x,this.y,this.color));
      // small pop effect
    }
    done(){ return this.exploded && this.particles.length===0; }
  }
  class Particle{
    constructor(x,y,color){
      this.x=x; this.y=y;
      const angle = rand(0,Math.PI*2);
      const speed = rand(1.6,5.6);
      this.vx = Math.cos(angle)*speed;
      this.vy = Math.sin(angle)*speed;
      this.color = color;
      this.life = 60 + Math.floor(rand(0,60));
      this.age = 0;
      this.size = rand(1.4,3.6);
      this.gravity = 0.05;
      this.dead=false;
    }
    update(){
      this.age++;
      if(this.age>this.life) this.dead=true;
      this.vy += this.gravity;
      this.x += this.vx; this.y += this.vy;
      // fade
    }
    draw(){
      const alpha = Math.max(0, 1 - (this.age/this.life));
      ctx.beginPath();
      ctx.fillStyle = this.color;
      ctx.globalAlpha = alpha;
      ctx.arc(this.x,this.y,this.size,0,Math.PI*2);
      ctx.fill();
      ctx.globalAlpha = 1;
    }
  }

  let rockets=[];
  let tick=0;
  function spawnRocket(){
    rockets.push(new Rocket());
  }
  let running = true;
  function loop(){
    if(!running) return;
    ctx.clearRect(0,0,w,h);
    if(Math.random()<0.08) spawnRocket();
    rockets.forEach(r=>{ r.update(); r.draw(); });
    rockets = rockets.filter(r=>!r.done());
    tick++;
    requestAnimationFrame(loop);
  }
  loop();

  // End intro after 5 seconds
  setTimeout(()=>{
    // fade overlay
    overlay.classList.add('hidden');
    document.getElementById('mainContent').style.opacity = 1;
    document.getElementById('mainContent').style.transform = 'translateY(0)';
    running=false;
  }, 5000 + 600); // small buffer

})();

/* ===============================
   Letter modal + download
   =============================== */
const LETTER_TEXT = `Hii my Love - Jivika,

Happy birthday! 🎉 I wish I could be there to hug you and make you laugh today.
Even if I can't be with you in person, every moment we shared keeps me smiling.
You're kind, brilliant, and the silliest person I know — thank you for being you.

Love always,
<Strafy32> 💌
`;

function openLetter(){
  const modal = document.getElementById('letterModal');
  const content = document.getElementById('letterContent');
  content.textContent = ''; // typed effect
  modal.classList.add('show');
  modal.setAttribute('aria-hidden','false');

  // typing effect
  let i=0;
  const speed = 18;
  (function type(){
    if(i<LETTER_TEXT.length){
      content.textContent += LETTER_TEXT[i++];
      setTimeout(type, speed);
    }
  })();
}
function closeLetter(){
  const modal = document.getElementById('letterModal');
  modal.classList.remove('show');
  modal.setAttribute('aria-hidden','true');
  document.getElementById('letterContent').textContent = '';
}
function downloadLetter(){
  const blob = new Blob([LETTER_TEXT], {type:'text/plain'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'a-little-letter-for-you.txt';
  document.body.appendChild(a);
  a.click();
  a.remove();
  URL.revokeObjectURL(url);
}

    /* -------------------------
       Cake canvas with 3 layers and 10 slices
       ------------------------- */
    const canvas = document.getElementById('cakeCanvas');
    const ctx = canvas.getContext('2d');
    let slices = 10;
    let bites = 0;
    const bitesLeftEl = document.getElementById('bitesLeft');
    const resetCakeBtn = document.getElementById('resetCake');

    function drawCake(){
      const w = canvas.width;
      const h = canvas.height;
      ctx.clearRect(0,0,w,h);

      // center
      const cx = w/2;
      const cy = h/2 + 20;
      // total radius
      const R = 100;

      // draw plate
      ctx.save();
      ctx.translate(cx, cy+80);
      ctx.fillStyle = '#052027';
      ctx.beginPath();
      ctx.ellipse(0,0,150,28,0,0,Math.PI*2);
      ctx.fill();
      ctx.restore();

      // layers from bottom to top (3 layers)
      const layerHeights = [42, 34, 28];
      const colors = ['#f7c7d9','#ffd6b3','#ffe6f0']; // frosting-ish
      const cakeColors = ['#9b5f3f','#a66f45','#8b4a2f']; // cake inside shades

      // compute angular slices removed
      const removed = bites; // how many slices removed
      const sliceAngle = (Math.PI*2)/slices;

      // draw each layer as arc sectors
      let currentRadius = R;
      for(let L=0; L<3; L++){
        const lh = layerHeights[L];
        // frosting band
        for(let s=0; s<slices; s++){
          const start = -Math.PI/2 + s*sliceAngle;
          const end = start + sliceAngle;
          // if this slice index is < removed, then skip drawing for 'removed' slices (make transparent)
          const isRemoved = (s < removed);
          ctx.beginPath();
          ctx.moveTo(cx, cy);
          ctx.arc(cx, cy, currentRadius, start, end);
          ctx.closePath();
          // cake fill for that slice (inside)
          ctx.fillStyle = isRemoved ? 'rgba(0,0,0,0.0)' : cakeColors[L];
          ctx.fill();

          // frosting ring
          ctx.beginPath();
          ctx.moveTo(cx, cy);
          ctx.arc(cx, cy, currentRadius - (lh*0.25), end, start, true);
          ctx.closePath();
          ctx.fillStyle = isRemoved ? 'rgba(0,0,0,0.0)' : colors[L];
          ctx.fill();
        }

        currentRadius -= lh;
      }

      // top decorations (sprinkles)
      if(bites < slices){
        ctx.save();
        for(let i=0;i<26;i++){
          const angle = Math.random()*Math.PI*2;
          const r = Math.random()*(R-60);
          const x = cx + Math.cos(angle)*r;
          const y = cy + Math.sin(angle)*r;
          ctx.fillStyle = `hsl(${Math.random()*360} 90% 70%)`;
          ctx.fillRect(x, y, 4, 2);
        }
        ctx.restore();
      } else {
        // if eaten show a small "yummy" text
        ctx.save();
        ctx.fillStyle = 'rgba(255,255,255,0.95)';
        ctx.font = '18px Poppins';
        ctx.textAlign = 'center';
        ctx.fillText('Yum! New cake appeared 🧁', cx, cy);
        ctx.restore();
      }
    }

    // initial draw
    drawCake();
    bitesLeftEl.textContent = Math.max(0, slices - bites);

    // handle click
    canvas.addEventListener('click', (e)=> {
      if(bites >= slices){
        // show small sparkle then reset automatically
        resetCake();
        return;
      }
      bites++;
      bitesLeftEl.textContent = Math.max(0, slices - bites);
      // little particle effect
      burstParticles(e.offsetX, e.offsetY);
      drawCake();
    });

    resetCakeBtn.addEventListener('click', resetCake);

    function resetCake(){
      bites = 0;
      bitesLeftEl.textContent = slices - bites;
      drawCake();
      // tiny bounce
      canvas.animate([{ transform:'translateY(0)'},{ transform:'translateY(-8px)'},{ transform:'translateY(0)'}], { duration:420, easing:'cubic-bezier(.2,.9,.3,1)'});
    }

    // simple particle burst
    function burstParticles(x,y){
      const count = 18;
      for(let i=0;i<count;i++){
        const p = document.createElement('div');
        p.style.position='absolute';
        p.style.left = (canvas.getBoundingClientRect().left + x - 4) + 'px';
        p.style.top = (canvas.getBoundingClientRect().top + y - 4) + 'px';
        p.style.width='8px'; p.style.height='8px'; p.style.borderRadius='50%';
        p.style.background = `hsl(${Math.random()*360} 90% 65%)`;
        p.style.zIndex = 9999;
        p.style.pointerEvents='none';
        document.body.appendChild(p);
        const dx = (Math.random()-0.5)*200;
        const dy = -Math.random()*200;
        p.animate([
          { transform:'translate(0,0) scale(1)', opacity:1 },
          { transform:`translate(${dx}px, ${dy}px) scale(0.6)`, opacity:0 }
        ], { duration:800+Math.random()*400, easing:'cubic-bezier(.2,.9,.3,1)', fill:'forwards' });
        setTimeout(()=> p.remove(), 1400);
      }
    }

/* ===============================
   Video controls: custom play/pause/download
   =============================== */
(function(){
  document.querySelectorAll('.videoCard').forEach(card=>{
    const btns = card.querySelectorAll('.iconBtn');
    const vid = card.querySelector('.vplayer');
    btns.forEach(b=>{
      b.addEventListener('click', ()=>{
        const act = b.getAttribute('data-action');
        if(act==='play'){ vid.play(); }
        if(act==='pause'){ vid.pause(); }
        if(act==='download'){
          // try to download current source
          const src = vid.querySelector('source') ? vid.querySelector('source').src : vid.currentSrc;
          if(!src){ alert('No downloadable video source set. Replace "sample-video-x.mp4" with a real file URL.'); return; }
          const a = document.createElement('a'); a.href = src; a.download = '';
          document.body.appendChild(a); a.click(); a.remove();
        }
      });
    });
  });
})();

/* ===============================
   Small nice touches: subtle background float animation
   =============================== */
(function(){
  const el = document.querySelector('body');
  let t=0;
  function anim(){ t+=0.003; el.style.backgroundPosition = `${Math.sin(t)*10}% ${Math.cos(t*0.7)*6}%`; requestAnimationFrame(anim); }
  anim();
})();
</script>
</body>
</html>
